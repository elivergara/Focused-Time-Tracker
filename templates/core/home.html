{% extends 'base.html' %}

{% block title %}Home · MIT Dashboard{% endblock %}

{% block content %}
<header class="hero d-flex align-items-center">
  <div class="container py-5">
    <div class="row align-items-center">
      <div class="col-lg-7 text-white">
        <span class="badge text-bg-primary mb-3">Django · SQLite · Bootstrap</span>
        <h1 class="display-5 fw-bold mb-3">{{ app_name }}</h1>
        <p class="lead mb-4">{{ subtitle }}</p>
        <div class="d-flex gap-2 flex-wrap">
          <a href="{% url 'checkin_create' %}" class="btn btn-primary btn-lg"><i class="fa-solid fa-plus me-2"></i>New MIT Session</a>
          <a href="{% url 'monthly_summary' %}" class="btn btn-outline-light btn-lg"><i class="fa-solid fa-chart-line me-2"></i>View Monthly Summary</a>
        </div>
      </div>
      <div class="col-lg-5 mt-4 mt-lg-0">
        <div class="card glass-card border-0 shadow-lg">
          <div class="card-body p-4">
            <h5 class="card-title fw-semibold mb-3"><i class="fa-regular fa-calendar-check me-2"></i>This month</h5>
            <ul class="list-unstyled mb-0">
              <li class="mb-2">Total MITs: <strong>{{ summary.total|default:0 }}</strong></li>
              <li class="mb-2">Completed: <strong>{{ summary.completed|default:0 }}</strong></li>
              <li class="mb-2">Planned minutes: <strong>{{ summary.planned_minutes|default:0 }}</strong></li>
              <li>Actual minutes: <strong>{{ summary.actual_minutes|default:0 }}</strong></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<section class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Recent MITs</h3>
  </div>
  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-striped mb-0">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Task</th>
            <th>Planned</th>
            <th>Actual</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for mit in recent_mits %}
            <tr>
              <td><a href="{% url 'checkin_detail' mit.daily_checkin.pk %}">{{ mit.daily_checkin.date }}</a></td>
              <td>{{ mit.get_category_display }}</td>
              <td>{{ mit.title }}</td>
              <td>{{ mit.planned_minutes }}m</td>
              <td>{% if mit.actual_minutes %}{{ mit.actual_minutes }}m{% else %}-{% endif %}</td>
              <td><span class="badge text-bg-secondary">{{ mit.get_status_display }}</span></td>
            </tr>
          {% empty %}
            <tr><td colspan="6" class="text-center py-4">No MIT sessions yet. Create your first check-in.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}
